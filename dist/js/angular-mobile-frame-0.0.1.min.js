/*!
 * Angular Mobile Frame - v0.0.1
 *
 * 2013-07-08
 *
 * Handy frame-elements for a typical mobile website with off-canvas-navigation.
 *
 * https://github.com/herschel666/angular-mobile-frame
 *
 * Copyright (c) 2013 Emanuel Kluge;
 * Licensed WTFPL
**/
!function(a,b){var c="$mobileFrame",d="directive";a.module("ek.mobileFrame",["ng"]).provider("$mobileFrame",function(){var a,b,c;this.$get=function(){return{getHeaderHeight:function(){return a},getFooterHeight:function(){return b},getNavWidth:function(){return c}}},this.setHeaderHeight=function(b){return a=b,this},this.setFooterHeight=function(a){return b=a,this},this.setNavWidth=function(a){return c=a,this}}).controller("MobileFrameCtrl",function(){var a=this;this.toggleNav=function(){a.callback.call()},this.onNavToggle=function(b){a.callback=b}})[d]("mobileFrame",[c,"$location",function(a,b){function c(){var a=f?0:e;(!arguments.length||f)&&(d.css({"-webkit-transform":"translate3d("+a+"px, 0, 0)","-moz-transform":"translate3d("+a+"px, 0, 0)",transform:"translate3d("+a+"px, 0, 0)"}),f=!f)}var d,e=a.getNavWidth(),f=!1;return{restrict:"E",transclude:!0,scope:!0,replace:!0,controller:"MobileFrameCtrl",template:'<section class="mobile-frame" ng-transclude></section>',link:function(a,f,g,h){d=f.css({paddingLeft:e+"px",left:-e+"px"}),h.onNavToggle(c),a.location=b,a.$watch("location.path()",c)}}}])[d]("mobileHeader",[c,function(b){return{restrict:"E",require:"^mobileFrame",transclude:!0,replace:!0,template:['<header class="mobile-header" role="banner">','	<button type="button" class="mobile-nav-toggle" id="mobile-nav-toggle">Toggle</button>','	<div class="mobile-header-inner" ng-transclude></div>',"</header>"].join(""),link:function(c,d,e,f){d.css("height",b.getHeaderHeight()+"px"),a.element(document.getElementById("mobile-nav-toggle")).bind("click",f.toggleNav)}}}])[d]("mobileNav",[c,function(a){return{restrict:"E",transclude:!0,replace:!0,template:['<div class="mobile-nav">','	<div class="mobile-nav-inner" ng-transclude></div>',"</div>"].join(""),link:function(b,c){var d=a.getNavWidth();c.css("width",d+"px")}}}])[d]("mobileContent",[c,"$window","$compile",function(c,d,e){function f(){return d.innerHeight-(c.getHeaderHeight()+c.getFooterHeight())}function g(a,b){var c='<div class="mobile-content" role="main">';return c+=a?'<div class="mobile-content-inner" ng-view></div>':'<div class="mobile-content-inner">'+b+"</div>",c+="</div>"}function h(b){b.css("height",f()+"px"),a.element(d).bind("resize",function(){b.css("height",f()+"px")})}return{restrict:"E",transclude:"element",scope:!0,compile:function(c,d,f){var i=d.ngView!==b,j=d.class;return function(b,c){var d;return i?(d=a.element(g(i)),d.addClass(j),e(d)(b),c.replaceWith(d),h(d),void 0):(f(b,function(b){d=a.element(g(i,b.html())),d.addClass(j),c.replaceWith(d),h(d)}),void 0)}}}}])[d]("mobileFooter",[c,function(a){return{restrict:"E",transclude:!0,replace:!0,template:['<footer class="mobile-footer">','	<div class="mobile-footer-inner" ng-transclude></div>',"</footer>"].join(""),link:function(b,c){c.css("height",a.getFooterHeight()+"px")}}}])}(angular);